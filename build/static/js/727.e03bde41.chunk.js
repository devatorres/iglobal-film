"use strict";(self.webpackChunkipglobal_test=self.webpackChunkipglobal_test||[]).push([[727],{727:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var r=n(9439),o=n(2791),u=n(4530),i=n(4165),s=n(5861),a=n(8783),c=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r,o,u,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.movieId,r=t.value,o=t.guestSession,u="".concat(a.T,"/movie/").concat(n,"/rating?api_key=").concat(a.$,"&guest_session_id=").concat(o),e.next=4,fetch(u,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({value:r})});case 4:return s=e.sent,e.next=7,s.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=c,f=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,r,o,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.movieId,r=t.guestSession,o="".concat(a.T,"/movie/").concat(n,"/rating?api_key=").concat(a.$,"&guest_session_id=").concat(r),e.next=4,fetch(o,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"}});case 4:return u=e.sent,e.next=7,u.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=f,l=n(9067),p=function(e){var t=e.movieId,n=(0,o.useState)(u._),i=(0,r.Z)(n,2),s=i[0],a=i[1],c=(0,l.Z)().user;return{value:s,setValue:a,rateMovie:function(){v({movieId:t,value:s,guestSession:null===c||void 0===c?void 0:c.guest_session_id}).then((function(e){})).catch((function(e){}))},deleteRateMovie:function(){d({movieId:t,guestSession:null===c||void 0===c?void 0:c.guest_session_id}).then((function(e){})).catch((function(e){}))}}},h=n(184),m=function(e){var t,n=e.movieId,r=(0,l.Z)().user,o=p({movieId:n}),u=o.value,i=o.setValue,s=o.rateMovie,a=o.deleteRateMovie,c=null===(t=r.rated_movies_id)||void 0===t?void 0:t.find((function(e){return e===n}));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s()},children:[(0,h.jsx)("button",{type:"submit",children:"Votar"}),(0,h.jsx)("input",{type:"number",value:u,onChange:function(e){var t=Number(e.target.value);i(t)}})]}),c&&(0,h.jsx)("button",{onClick:function(e){e.preventDefault(),a()},children:"Borrar votaci\xf3n"})]})}}}]);
//# sourceMappingURL=727.e03bde41.chunk.js.map